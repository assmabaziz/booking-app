<section class="container shadow py-5 mt-3">
  <div class="row">
    <h3 *ngIf="!isEditMode && !isViewMode" class="mb-2">Add New Room</h3>
    <h3 *ngIf="isEditMode" class="mb-2">
      Edit <span class="text-mainColor">{{ roomDatda.roomNumber }}</span> Room
    </h3>
    <h3 *ngIf="isViewMode" class="mb-2">
      Room<span class="text-mainColor"> {{ roomDatda.roomNumber }} </span
      >Details
    </h3>
    <div class="card-auth">
      <div class="inputs-auth">
        <form [formGroup]="addRoomForm" (ngSubmit)="onSubmit(addRoomForm)">
          <div class="form-group mb-3">
            <label *ngIf="isEditMode || isViewMode" for="roomNumber"
              >Room Number</label
            >
            <input
              type="text"
              formControlName="roomNumber"
              class="form-control"
              id="roomNumber"
              placeholder="Room Number"
            />
            <span
              class="text-danger mb-3"
              *ngIf="
                addRoomForm.get('roomNumber')?.errors &&
                addRoomForm.get('roomNumber')?.touched
              "
            >
              <span *ngIf="addRoomForm.get('roomNumber')?.getError('required')"
                >roomNumber is required</span
              >
            </span>
          </div>
          <div class="row gap-2 flex-nowrap mb-3">
            <div class="col-md-6">
              <div class="form-group">
                <label *ngIf="isEditMode || isViewMode" for="price"
                  >Price</label
                >
                <input
                  type="text"
                  formControlName="price"
                  class="form-control"
                  id="price"
                  placeholder="Price"
                />
                <span
                  class="text-danger mb-3"
                  *ngIf="
                    addRoomForm.get('price')?.errors &&
                    addRoomForm.get('price')?.touched
                  "
                >
                  <span *ngIf="addRoomForm.get('price')?.getError('required')"
                    >price is required</span
                  >
                </span>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label *ngIf="isEditMode || isViewMode" for="capacity"
                  >Capacity</label
                >
                <input
                  type="text"
                  formControlName="capacity"
                  class="form-control"
                  id="capacity"
                  placeholder="capacity"
                />
                <span
                  class="text-danger mb-3"
                  *ngIf="
                    addRoomForm.get('capacity')?.errors &&
                    addRoomForm.get('capacity')?.touched
                  "
                >
                  <span
                    *ngIf="addRoomForm.get('capacity')?.getError('required')"
                    >capacity is required</span
                  >
                </span>
              </div>
            </div>
          </div>
          <div class="row gap-2 flex-nowrap mb-3">
            <div class="col-md-6">
              <div class="form-group">
                <label *ngIf="isEditMode || isViewMode" for="discount"
                  >Discount</label
                >
                <input
                  type="text"
                  formControlName="discount"
                  class="form-control"
                  id="discount"
                  placeholder="Discount"
                />
                <span
                  *ngIf="
                    addRoomForm.get('discount')?.errors &&
                    addRoomForm.get('discount')?.touched
                  "
                  class="text-danger mb-3"
                >
                  <span
                    *ngIf="addRoomForm.get('discount')?.errors?.['required']"
                    class="mb-0"
                    >discount is required</span
                  >
                </span>
              </div>
            </div>
            <div class="col-md-6">

              <div class="form-group">
                  <label class="input-group-text" *ngIf="isEditMode || isViewMode" for="facilities"
                    >Facility</label
                  >
                <select
                formControlName="facilities"
                id="facilities"
                  class="form-select"
                  aria-label="facilities"
                >
                  <option *ngFor="let item of facilities" [value]="item._id" >
                    {{ item.name }}
                  </option>
                </select>
                <span class="text-danger mb-3 " *ngIf="
                addRoomForm.get('facilities')?.errors &&
                addRoomForm.get('facilities')?.touched
              ">
              <span *ngIf="addRoomForm.get('facilities')?.getError('required')">facilities is required</span>
            </span>
              </div>
            </div>
          </div>
          <div>
            <ngx-dropzone
              [disabled]="isViewMode"
              class="mb-3 dropzone"
              (change)="onSelect($event)"
              [multiple]="true"
            >
              <ngx-dropzone-label *ngIf="!imgSrc">
                <i
                  class="fa-solid fa-arrow-up-from-bracket d-block fs-2 pb-3"
                ></i>
                Drag & Drop or
                <span class="text-mainColor">Choose a Item Image</span> to
                Upload
              </ngx-dropzone-label>
              <ngx-dropzone-label *ngIf="imgSrc">
                <ng-container *ngFor="let item of imgSrc">
                  <img [src]="item" class="w-25 px-1 img-thumbnail" alt="" />
                </ng-container>
              </ngx-dropzone-label>
              <ngx-dropzone-image-preview
                ngProjectAs="ngx-dropzone-preview"
                *ngFor="let f of files"
                [file]="f"
                [removable]="true"
                (removed)="onRemove(f)"
              >
              </ngx-dropzone-image-preview>
            </ngx-dropzone>
          </div>
          <div class="d-flex justify-content-end align-items-end mt-5">
            <button
              type="button"
              routerLink="/dashboard/rooms"
              class="btn-cancel"
            >
              Cancle
            </button>
            <button class="mx-4 btn-save" [ngClass]="{ 'd-none': isViewMode }">
              Save
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</section>
